{%- include 'style_mp_section' -%}
{%- assign countdown_timer_style = section.settings.countdown_style -%}
<div class="nt_custom_{{section.id}} bg_overlay_{{section.settings.overlay}} nt-full nt-banner-parallax{%- if section.settings.use_parallax %} ntparallax{%- endif %}{%- if section.settings.image != blank %} lazyload lazypreload nt_bg_lz{%- endif %}{%- if section.settings.full_height %} nt-full-height{%- endif -%}"{%- if section.settings.image != blank %} data-bgset="{%- include 'bgset', image: section.settings.image -%}" data-sizes="auto" data-parent-fit="cover"{%- endif %}>
   <div class="div_overlay"></div>
   <div class="container wrap_countdown">
      <div class="nasa-banner-content {{section.settings.color_scheme}} {{section.settings.align}}">
         <div class="banner-inner">
            <h3 class="mt__0 mb__50 fwb">{{section.settings.title}}</h3>
            {%- if section.settings.timer != blank -%}
               {%- if section.settings.timer contains ',' -%}
                  {%- assign list_countdown = section.settings.timer | replace: ' ,', ',' | replace: ', ', ',' | replace: ' , ', ',' | split: ',' -%}
                  {%- assign year_now = "now" | date: "%Y" | plus:0 -%}
                  {%- assign month_now_text = "now" | date: "%m" | downcase -%}
                  {%- assign month_now = "now" | date: "%m" | plus:0 -%}
                  {%- assign day_now = "now" | date: "%e" | plus:0 -%}
                  {%- assign day_now_text = "now" | date: "%e" | downcase -%}
                  {%- for list in list_countdown -%}
                       {%- assign countdown = list | split: ' ' | first | replace: ' /', '/' | replace: '/ ', '/' | replace: ' / ', '/' | split: '/' -%}
                       {%- assign year = countdown[0] | plus:0 -%}
                      {%- assign month = countdown[1] | plus:0 -%}
                       {%- assign day = countdown[2] | plus:0 -%}
                       {%- if year >= year_now and month >= month_now and day >= day_now -%}
                           {%- assign _user_countdown = list -%}
                           {%- break -%}
                       {%- endif -%}
                  {%- endfor -%}
               {%- else -%}
                  {%- assign _user_countdown = section.settings.timer -%}
               {%- endif -%}
               <div class="nt_countdow_page size_ex_large {{countdown_timer_style}}" data-time="{{_user_countdown}} 23:59:59"></div>
            {%- endif -%}
            {%- if section.settings.link != blank -%}<a class="button small nasa-button-banner mt__50 pr" href="{{section.settings.link}}">{{section.settings.button}}</a>{%- endif -%}
         </div>
      </div>
   </div>
</div>
{%- schema -%}
  {
    "name": "Product Deal 4",
    "class": "nt-section nt_product_deal_4 spb_animate",
    "settings": [
      {
        "type": "header",
        "content": "== General Settings"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Background Image"
      },
      {
        "type": "color",
        "id": "section_bg_color",
        "label": "Background color",
        "default": "#e2e2e2"
      },
      {
        "type": "range",
        "id": "overlay",
        "label": "Background overlay",
        "default": 0,
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "%"
      },
       {
        "type": "checkbox",
        "id": "full_height",
        "label": "Full height row?",
        "info": "if checked row will be set to full height.",
        "default": false
      },
      {
        "type": "select",
        "id": "align",
        "label": "Align",
        "default": "tc",
        "options": [
          {
            "label": "Center",
            "value": "tc"
          },
          {
            "label": "Left",
            "value": "tl"
          },
          {
            "label": "Right",
            "value": "tr"
          }
        ]
      },
      {
        "type": "select",
        "id": "color_scheme",
        "label": "Color Scheme",
        "default": "dark",
        "options": [
          {
            "value": "light",
            "label": "Light"
          },
          {
            "value": "dark",
            "label": "Dark"
          }
        ]
      },
      {
        "type": "text",
        "id": "timer",
        "label": "Countdown timer",
        "info":"2020/04/19",
        "default": "2020/04/19"
      },
      {
        "type": "select",
        "id": "countdown_style",
        "label": "Countdown style",
        "default": "dark",
        "options": [
          {
            "value": "light",
            "label": "Countdown timer light"
          },
          {
            "value": "light_2",
            "label": "Countdown timer light 2"
          },
          {
            "value": "dark",
            "label": "Countdown timer default"
          }
        ]
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title: ",
        "default": "Deals of the day"
      },
      {
        "type": "text",
        "id": "button",
        "label": "Button Title: ",
        "default": "SHOP NOW"
      },
      {
        "type":"url",
        "id":"link",
        "label":"Link",
        "info": "Optional"
      },
      {
        "type": "header",
        "content": "== Design Options"
      },
      {
        "type": "text",
        "id": "section_margin_top",
        "label": "Margin top",
        "info": "60px"
      },
      {
        "type": "text",
        "id": "section_margin_bottom",
        "label": "Margin bottom",
        "info": "60px"
      },
      {
        "type": "text",
        "id": "section_margin_left",
        "label": "Margin left",
        "info": "60px"
      },
      {
        "type": "text",
        "id": "section_margin_right",
        "label": "Margin right",
        "info": "60px"
      },
      {
        "type": "text",
        "id": "section_padding_top",
        "label": "Padding top",
        "default":"165px",
        "info": "60px"
      },
      {
        "type": "text",
        "id": "section_padding_right",
        "label": "Padding right",
        "info": "60px"
      },
      {
        "type": "text",
        "id": "section_padding_bottom",
        "label": "Padding bottom",
        "default":"165px",
        "info": "60px"
      },
      {
        "type": "text",
        "id": "section_padding_left",
        "label": "Padding left",
        "info": "60px"
      },
     {
        "type": "header",
        "content": "== Design Mobile Options"
      },
      {
        "type": "text",
        "id": "section_margin_top_mb",
        "label": "Margin top",
        "info": "20px"
      },
      {
        "type": "text",
        "id": "section_margin_bottom_mb",
        "label": "Margin bottom",
        "info": "20px"
      },
      {
        "type": "text",
        "id": "section_padding_top_mb",
        "label": "Padding top",
        "info": "20px"
      },
      {
        "type": "text",
        "id": "section_padding_right_mb",
        "label": "Padding right",
        "info": "20px"
      },
      {
        "type": "text",
        "id": "section_padding_bottom_mb",
        "label": "Padding bottom",
        "info": "20px"
      },
      {
        "type": "text",
        "id": "section_padding_left_mb",
        "label": "Padding left",
        "info": "60px"
      },
      {
        "type": "header",
        "content": "== Elessi Extras"
      },
      {
        "type": "checkbox",
        "id": "use_parallax",
        "label": "Use Elessi parallax?",
        "default": true
      }
    ],
    "presets": [
      {
        "name": "Product Deal 4",
        "category": "3. Product Deals"
      }
    ]
  }
{% endschema %}
